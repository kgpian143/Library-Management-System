<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Wel-Come To | Bhagat Singh Library</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
      name="viewport"
    />
    <!-- Bootstrap 3.3.6 -->
    <link
      rel="stylesheet"
      href="/AdminAssets/bootstrap/css/bootstrap.min.css"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"
    />
    <!-- Ionicons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css"
    />
    <!-- Ionicons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"
    />

    <link
      rel="stylesheet"
      href="/AdminAssets/plugins/datatables/dataTables.bootstrap.css"
    />
    <link rel="stylesheet" href="/AdminAssets/dist/css/AdminLTE.min.css" />
    <link
      rel="stylesheet"
      href="/AdminAssets/dist/css/skins/_all-skins.min.css"
    />
    <link
      rel="stylesheet"
      href="/AdminAssets/plugins/daterangepicker/daterangepicker.css"
    />
    <link
      rel="stylesheet"
      href="/AdminAssets/plugins/datepicker/datepicker3.css"
    />
    <link rel="stylesheet" href="/AdminAssets/plugins/iCheck/all.css" />
    <link
      rel="stylesheet"
      href="/AdminAssets/plugins/colorpicker/bootstrap-colorpicker.min.css"
    />
    <link
      rel="stylesheet"
      href="/AdminAssets/plugins/timepicker/bootstrap-timepicker.min.css"
    />
    <link
      rel="stylesheet"
      href="/AdminAssets/plugins/select2/select2.min.css"
    />
    <style>
      .input {
        border: 0;
        padding: 10px;
        font-size: 25px;
        color: #ccc;
        border: solid 1px #ccc;
        margin: 0 0 20px;
        width: 300px;
        -moz-box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.2);
        -webkit-box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.2);
        box-shadow: inner 0 0 4px rgba(0, 0, 0, 0.2);
        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;
      }

      input:focus {
        outline: none !important;
        border: 1px solid red;
        box-shadow: 0 0 10px #719ece;
      }

      textarea:focus {
        outline: none !important;
        border: 1px solid red;
        box-shadow: 0 0 10px #719ece;
      }

      div.stars {
        display: inline-block;
      }

      input.star {
        display: none;
      }

      label.star {
        float: right;
        padding: 10px;
        font-size: 23px;
        color: #444;
        transition: all 0.2s;
      }

      input.star:checked ~ label.star:before {
        content: "\f005";
        color: #fd4;
        transition: all 0.25s;
      }

      input.star-5:checked ~ label.star:before {
        color: #fe7;
        text-shadow: 0 0 20px #952;
      }

      input.star-1:checked ~ label.star:before {
        color: #f62;
      }

      label.star:hover {
        transform: rotate(-15deg) scale(1.3);
      }

      label.star:before {
        content: "\f006";
        font-family: FontAwesome;
      }
    </style>
    <script src="/AdminAssets/jquery.min.js"></script>
    <link
      href="/Content/DevExtremeBundle?v=6dkc8mM2EeoWTbDDObyp5KadroT_ey1Fu-IMeNZjY9c1"
      rel="stylesheet"
    />

    <style>
      a {
        text-transform: uppercase !important;
      }

      .btn {
        text-transform: uppercase !important;
      }
    </style>
    <script src="/AdminAssets/bootstrap.min.js"></script>
  </head>

  <body class="hold-transition skin-blue sidebar-mini">
    <!-- Site wrapper -->
    <div class="wrapper" style="min-height: 750px">
      <header class="main-header">
        <a href="/Admin/index.html" class="logo">
          <span class="logo-mini">BSL</span>
          <span class="logo-lg" style="font-size: 15px"
            ><b> Bhagat Singh Library </b></span
          >
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top">
          <!-- Sidebar toggle button-->
          <a
            href="#"
            class="sidebar-toggle"
            data-toggle="offcanvas"
            role="button"
          >
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              <li class="dropdown user user-menu">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <img
                    src="/AdminAssets/libraryprologo.png"
                    style="background-color: white; border-radius: 50px"
                    class="user-image"
                    alt="User Image"
                  />
                  <span class="hidden-xs"> Bhagat Singh Library </span>
                </a>
                <ul class="dropdown-menu">
                  <!-- User image -->
                  <li class="user-header">
                    <img
                      src="/AdminAssets/libraryprologo.png"
                      style="background-color: white; border-radius: 50px"
                      class="img-circle"
                      alt="User Image"
                    />
                    <p>Wel-Come Admin,</p>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </header>

      <aside class="main-sidebar">
        <section class="sidebar">
          <div class="user-panel">
            <div
              class="pull-left image"
              style="background-color: white; border-radius: 50px"
            >
              <img
                src="/AdminAssets/libraryprologo.png"
                class="img-circle"
                alt="User Image"
              />
            </div>
            <div class="pull-left info">
              <p style="font-size: 12px">Bhagat Singh Library</p>
              <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
            </div>
          </div>

          <ul class="sidebar-menu">
            <li>
              <a href="/Admin/index.html">
                <i class="fa fa-dashboard"></i> <span>Dashboard</span>
              </a>
            </li>

            <li class="treeview">
              <a href="#">
                <i class="fa fa-money"></i> <span> Expenses </span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu">
                <li>
                  <a href="/Admin/ExpenseAddOrUpdate.html"
                    ><i class="fa fa-circle-o"></i> Add New
                  </a>
                </li>
                <li>
                  <a href="/Admin/Expenses.html"
                    ><i class="fa fa-circle-o"></i> Expenses
                  </a>
                </li>
              </ul>
            </li>
            <li class="treeview">
              <a href="#">
                <i class="fa fa-cogs"></i> <span> Library Masters </span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu">
                <li>
                  <a href="/Admin/ShiftAddOrUpdate.html"
                    ><i class="fa fa-circle-o"></i> Add New Shift
                  </a>
                </li>
                <li>
                  <a href="/Admin/Shifts.html"
                    ><i class="fa fa-circle-o"></i> Shifts
                  </a>
                </li>
                <li>
                  <a href="/Admin/SeatAddOrUpdate.html"
                    ><i class="fa fa-circle-o"></i> Add New Seat
                  </a>
                </li>

                <li>
                  <a href="/Admin/Seats.html"
                    ><i class="fa fa-circle-o"></i> Seats
                  </a>
                </li>
              </ul>
            </li>
            <li class="treeview">
              <a href="#">
                <i class="fa fa-users"></i> <span> Students </span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu">
                <li>
                  <a href="/Admin/StudentAddOrUpdate.html"
                    ><i class="fa fa-circle-o"></i> Add New Student
                  </a>
                </li>

                <li>
                  <a href="/Admin/Students.html"
                    ><i class="fa fa-circle-o"></i> All Students
                  </a>
                </li>
              </ul>
            </li>
            <li class="treeview">
              <a href="#">
                <i class="fa fa-wheelchair"></i> <span> Seat Allocation </span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu">
                <li>
                  <a href="/Admin/SeatAllocation.html"
                    ><i class="fa fa-circle-o"></i> Assign New Seat
                  </a>
                </li>
                <li>
                  <a href="/Admin/SeatAllocationReport.html"
                    ><i class="fa fa-circle-o"></i> All Assigned Seats
                  </a>
                </li>
              </ul>
            </li>

            <li class="treeview">
              <a href="#">
                <i class="fa fa-wheelchair"></i> <span> SMS Reminders</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu">
                <li>
                  <a href="/Admin/HolidaysReminder.html"
                    ><i class="fa fa-circle-o"></i> HolidaysReminder
                  </a>
                </li>
                <li>
                  <a href="/Admin/DueFeesReport.html"
                    ><i class="fa fa-circle-o"></i> DuesReminder
                  </a>
                </li>
                <li>
                  <a href="/Admin/SMSLogs.html"
                    ><i class="fa fa-circle-o"></i> SMSReport
                  </a>
                </li>
              </ul>
            </li>

            <li>
              <a href="/Admin/PaymentsReports.html">
                <i class="fa fa-money"></i> <span> Payment Report </span>
              </a>
            </li>
          </ul>
        </section>
      </aside>

      <div class="content-wrapper">
        <section class="content-header">
          <h1 style="text-transform: uppercase">Assign New Seat</h1>
          <ol class="breadcrumb">
            <li>
              <a href="/Admin/index.html"
                ><i class="fa fa-dashboard"></i> Home</a
              >
            </li>
            <li><a href="#"> Assign New Seat </a></li>
          </ol>
        </section>

        <section class="content" style="min-height: 600px">
          <style>
            .select2-results__option {
              padding-right: 20px;
              vertical-align: middle;
            }

            .select2-results__option:before {
              content: "";
              display: inline-block;
              position: relative;
              height: 20px;
              width: 20px;
              border: 2px solid #e9e9e9;
              border-radius: 4px;
              background-color: #fff;
              margin-right: 20px;
              vertical-align: middle;
            }

            .select2-results__option[aria-selected="true"]:before {
              font-family: fontAwesome;
              content: "\f00c";
              color: #fff;
              background-color: #f77750;
              border: 0;
              display: inline-block;
              padding-left: 3px;
            }

            .select2-container--default
              .select2-results__option[aria-selected="true"] {
              background-color: #fff;
            }

            .select2-container--default
              .select2-results__option--highlighted[aria-selected] {
              background-color: #eaeaeb;
              color: #272727;
            }

            .select2-container--default .select2-selection--multiple {
              margin-bottom: 10px;
            }

            .select2-container--default.select2-container--open.select2-container--below
              .select2-selection--multiple {
              border-radius: 4px;
            }

            .select2-container--default.select2-container--focus
              .select2-selection--multiple {
              border-color: #f77750;
              border-width: 2px;
            }

            .select2-container--default .select2-selection--multiple {
              border-width: 2px;
            }

            .select2-container--open .select2-dropdown--below {
              border-radius: 6px;
              box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            }

            .select2-selection .select2-selection--multiple:after {
              content: "hhghgh";
            }

            /* select with icons badges single*/
            .select-icon .select2-selection__placeholder .badge {
              display: none;
            }

            .select-icon .placeholder {
              /* 	display: none; */
            }

            .select-icon .select2-results__option:before,
            .select-icon .select2-results__option[aria-selected="true"]:before {
              display: none !important;
              /* content: "" !important; */
            }

            .select-icon .select2-search--dropdown {
              display: none;
            }

            .select2-container--default
              .select2-selection--multiple
              .select2-selection__rendered
              li {
              list-style: none;
              color: black;
              font-weight: 700;
            }
          </style>

          <div class="row">
            <div class="col-md-12">
              <div class="box box-primary">
                <div class="box-header with-border">
                  <a
                    href="/Admin/SeatAllocationReport.html"
                    class="btn btn-info"
                    ><i class="fa fa-arrow-left"></i> Back</a
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="box box-primary">
            <div
              class="box-body"
              style="margin: 15px; height: 600px; overflow-x: scroll"
            >
              <div id="seat-container" class="row"></div>

              <script>
                fetch("http://localhost:5000/get-seats-available")
                  .then((response) => response.json())
                  .then((seats) => {
                    seats.forEach((seat) => {
                      document.getElementById("seat-container").innerHTML += `
                    <div class="col-md-3 col-xl-3">
                        <div class="card bg-c-green order-card">
                            <div class="card-block" style="min-height: 191.8px">
                                <h6 class="m-b-20" style="font-size: 20px; text-align: left">
                                    Available for Booking
                                </h6>
                                <h4>
                                    <span style="font-size: 20px">
                                        <i class="fa fa-wheelchair" aria-hidden="true"></i>
                                        Seat No. <strong>${seat.seat_no} - ${seat.seat_type}</strong>
                                    </span>
                                </h4>
                                <p class="m-b-0" style="text-align: left; padding-top: 10px">
                                    <button class="btn btn-info btnmodelshow" data-Id="${seat.seat_id}" data-seatno="${seat.seat_no}" data-seattype="${seat.seat_type}">
                                    Book Now
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>`;
                    });

                    console.log(seats);
                  })
                  .catch((error) => console.error("Error:", error));
              </script>
            </div>
          </div>

          <div
            class="modal fade"
            id="ModelPopupId"
            tabindex="-1"
            role="dialog"
            aria-hidden="true"
          >
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="example-Modal3">
                    Assign New Seat
                  </h5>
                  <button
                    type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close"
                  >
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form id="seatAllocationForm">
                    <input type="hidden" name="SeatId" id="SeatId" />
                    <h5
                      style="
                        text-align: center;
                        font-weight: 600;
                        text-transform: uppercase;
                        margin: auto;
                      "
                    >
                      Seat No.
                    </h5>
                    <h4
                      id="seatnoshow"
                      style="
                        text-align: center;
                        font-weight: 600;
                        font-size: 35px;
                        margin: auto;
                      "
                    ></h4>
                    <div class="form-group">
                      <label class="form-control-label">Select Student</label>
                      <br />
                      <select
                        required
                        class="form-control select2"
                        name="StudentId"
                        id="StudentId"
                        style="width: 100%"
                      >
                        <option value>Select</option>
                        <script>
                          fetch("http://localhost:5000/get-students-available") // Adjust the URL to your API endpoint
                            .then((response) => response.json())
                            .then((students) => {
                              const select =
                                document.getElementById("StudentId");
                              students.forEach((student) => {
                                const option = document.createElement("option");
                                option.value = student.id;
                                option.textContent = `${student.student_name} | ${student.father_name} | ${student.mobile_number}`;
                                select.appendChild(option);
                              });
                            })
                            .catch((error) => console.error("Error:", error));
                        </script>
                      </select>
                    </div>

                    <div class="row">
                      <div class="col-md-6">
                        <label class="control-label" style="margin-top: 5px">
                          Start Date
                        </label>
                        <div class="form-group">
                          <input
                            type="text"
                            required
                            name="StartDate"
                            autocomplete="off"
                            id="StartDate"
                            placeholder="Start Date"
                            class="form-control StartDate strdate mycheck2"
                          />
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label class="control-label" style="margin-top: 5px">
                          End Date
                        </label>
                        <div class="form-group">
                          <input
                            type="text"
                            required
                            id="EndDate"
                            name="EndDate"
                            autocomplete="off"
                            placeholder="End Date"
                            class="form-control datepicker3 enddate mycheck2"
                          />
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <label class="control-label" style="margin-top: 5px">
                          Select Shift
                        </label>
                        <div class="form-group">
                          <select
                            id="ShiftId"
                            class="form-control"
                            name="ShiftId"
                          >
                            <!-- Options will be dynamically added here -->
                          </select>

                          <script>
                            fetch("http://localhost:5000/get-shifts")
                              .then((response) => response.json())
                              .then((shifts) => {
                                const select =
                                  document.getElementById("ShiftId");
                                shifts.forEach((shift) => {
                                  const option =
                                    document.createElement("option");
                                  option.value = shift.shift_id;
                                  option.textContent = `${shift.shift_time} (Rs. ${shift.amount})`;
                                  option.dataset.amount2 = shift.amount; // You can still keep the data attribute if needed for later
                                  select.appendChild(option);
                                });
                              })
                              .catch((error) => console.error("Error:", error));
                          </script>

                          <hr />
                          <h5 style="margin: auto; font-size: 20px">
                            Grand Total Rs. <strong id="amountid">0</strong>
                          </h5>
                          <h5 style="margin: auto; font-size: 18px">
                            Total Days: <strong id="totaldays">0</strong>
                          </h5>
                          <input
                            type="hidden"
                            id="totalamount"
                            name="totalamount"
                            value="0"
                          />
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="col-md-6">
                        <label class="control-label" style="margin-top: 5px">
                          Payment Status
                        </label>
                        <div class="form-group">
                          <select
                            id="PaymentStatusId"
                            class="form-control select2"
                            id="PaymentStatus"
                            name="PaymentStatus"
                            required="True"
                            style="width: 100%"
                          >
                            <option value>Select</option>
                            <option value="PAID">PAID</option>
                            <option value="DUE">DUE</option>
                          </select>
                        </div>
                      </div>

                      <div
                        class="col-md-6 paymentmodediv"
                        style="display: block"
                      >
                        <label class="control-label" style="margin-top: 5px">
                          Payment Mode
                        </label>
                        <div class="form-group">
                          <select
                            id="PaymentModeId"
                            class="form-control select2"
                            id="PaymentMode"
                            name="PaymentMode"
                            style="width: 100%"
                          >
                            <option value>Select</option>
                            <option value="CASH">CASH</option>
                            <option value="BANK TRANSFER">BANK TRANSFER</option>
                            <option value="ONLINE BANKING">
                              ONLINE BANKING
                            </option>
                            <option value="PHONE PAY">PHONE PAY</option>
                            <option value="GOOGLE PAY">GOOGLE PAY</option>
                            <option value="BHARAT PAY">BHARAT PAY</option>
                            <option value="PAYTM">PAYTM</option>
                            <option value="AMAZON PAY">AMAZON PAY</option>
                            <option value="WHATSAPP PAY">WHATSAPP PAY</option>
                            <option value="MANUAL">MANUAL</option>
                            <option value="OTHER">OTHER</option>
                          </select>
                        </div>
                      </div>
                    </div>

                    <div class="row paymentmodediv" style="display: block">
                      <div class="col-md-6">
                        <label class="control-label" style="margin-top: 5px">
                          Paid Amount (Rs.)
                        </label>
                        <div class="form-group">
                          <input
                            type="number"
                            id="PaidAmount"
                            name="PaidAmount"
                            onkeypress="return IsNumericCheck(event, value)"
                            placeholder="Paid Amount"
                            class="form-control"
                            value="0"
                          />
                        </div>
                      </div>

                      <div class="col-md-6">
                        <label class="control-label" style="margin-top: 5px">
                          Discount
                        </label>
                        <div class="form-group">
                          <input
                            type="number"
                            id="Discount"
                            name="Discount"
                            onkeypress="return IsNumericCheck(event, value)"
                            placeholder="Discount"
                            class="form-control"
                            value="0"
                          />
                        </div>
                      </div>
                    </div>

                    <div class="p-5 border-top" style="text-align: center">
                      <button
                        type="submit"
                        onclick="return confirm('are you sure?')"
                        class="btn btn-primary waves-effect waves-light"
                      >
                        <i class="fa fa-check"></i> Assign Seat
                      </button>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-danger"
                    data-dismiss="modal"
                  >
                    <i class="fa fa-close"></i> Close
                  </button>
                </div>
              </div>
            </div>
          </div>

          <script>
            let FinalAmount = 0;
            let PrintAmount = 0;
            let finaldays = 0;
            document
              .getElementById("ShiftId")
              .addEventListener("change", function () {
                let selectedShiftId = this.value;
                let amount = this.options[this.selectedIndex].dataset.amount2;
                // Now you can use selectedShiftId and amount as per your requirement
                console.log(
                  "Selected Shift ID:",
                  selectedShiftId,
                  "Amount:",
                  amount
                );

                FinalAmount = amount;
                console.log("New FinalAmount:", FinalAmount);
                calc();
              });

            $(document).on("change", ".mycheck2", function () {
              func();
              calc();
            });

            function calc() {
              PrintAmount = 0;
              if (FinalAmount > 0 && finaldays > 0) {
                PrintAmount = (FinalAmount * finaldays) / 30;
                // convert PrintAmount in itegral part
                let intval = Math.round(PrintAmount);
                $("#amountid").text(intval);
                $("#totalamount").text(intval);
                document.getElementById("totalamount").value = intval;
              } else {
                $("#amountid").text(0);
              }
            }

            function func() {
              let strdate = $(".strdate").val();
              let enddate = $(".enddate").val();
              var date1 = new Date(strdate);
              var date2 = new Date(enddate);
              var milli_secs = date1.getTime() - date2.getTime();

              // Convert the milli seconds to Days
              var days = milli_secs / (1000 * 3600 * 24);
              finaldays = Math.round(Math.abs(days) + 1);
              if (finaldays > 0) {
                $("#totaldays").text(finaldays);
              } else {
                $("#totaldays").text(0);
              }
            }
          </script>

          <script>
            $(document).on("click", ".btnmodelshow", function () {
              let SeatId = $(this).attr("data-Id");
              let seatno = $(this).attr("data-seatno");
              $("#seatnoshow").text(seatno);
              $("#SeatId").val(SeatId);
              $("#ModelPopupId").modal("show");
            });
          </script>

          <script>
            $("#PaymentStatusId").change(function () {
              let SelectedVal = $("#PaymentStatusId").val();
              if (SelectedVal == "PAID") {
                $(".paymentmodediv").css("display", "block");
              } else if (SelectedVal == "DUE") {
                $(".paymentmodediv").css("display", "none");
              }
            });
          </script>

          <style>
            body {
              /*margin-top: 20px;
        background: #FAFAFA;*/
            }

            .order-card {
              color: #fff;
            }

            .bg-c-blue {
              background: linear-gradient(45deg, #4099ff, #73b4ff);
            }

            .bg-c-green {
              background: linear-gradient(35deg, #008000, #a99225);
              box-shadow: 2px 3px 4px grey !important;
            }

            .bg-c-yellow {
              background: linear-gradient(45deg, #ffb64d, #ffcb80);
            }

            .bg-c-pink {
              background: linear-gradient(45deg, #5c0909, #df2424);
              box-shadow: 2px 3px 4px grey !important;
            }

            .card {
              border-radius: 5px;
              -webkit-box-shadow: 0 1px 2.94px 0.06px rgba(4, 26, 55, 0.16);
              box-shadow: 0 1px 2.94px 0.06px rgba(4, 26, 55, 0.16);
              border: none;
              margin-bottom: 30px;
              -webkit-transition: all 0.3s ease-in-out;
              transition: all 0.3s ease-in-out;
            }

            .card .card-block {
              padding: 16px;
            }

            .order-card i {
              font-size: 26px;
            }

            .f-left {
              float: left;
            }

            .f-right {
              float: right;
            }
          </style>
        </section>
      </div>

      <div class="control-sidebar-bg"></div>
    </div>

    <script src="/AdminAssets/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="/AdminAssets/plugins/datatables/dataTables.bootstrap.min.js"></script>
    <!-- SlimScroll -->

    <script src="/AdminAssets/plugins/select2/select2.full.min.js"></script>
    <!-- InputMask -->
    <script src="/AdminAssets/plugins/input-mask/jquery.inputmask.js"></script>
    <script src="/AdminAssets/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="/AdminAssets/plugins/input-mask/jquery.inputmask.extensions.js"></script>
    <!-- date-range-picker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
    <script src="/AdminAssets/plugins/daterangepicker/daterangepicker.js"></script>
    <!-- bootstrap datepicker -->
    <script src="/AdminAssets/plugins/datepicker/bootstrap-datepicker.js"></script>
    <!-- bootstrap color picker -->
    <script src="/AdminAssets/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>
    <!-- bootstrap time picker -->
    <script src="/AdminAssets/plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <!-- SlimScroll 1.3.0 -->
    <script src="/AdminAssets/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- iCheck 1.0.1 -->
    <script src="/AdminAssets/plugins/iCheck/icheck.min.js"></script>
    <!-- FastClick -->
    <script src="/AdminAssets/plugins/fastclick/fastclick.js"></script>
    <!-- SlimScroll -->
    <script src="/AdminAssets/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="/AdminAssets/plugins/fastclick/fastclick.js"></script>
    <!-- AdminLTE App -->
    <script src="/AdminAssets/dist/js/app.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="/AdminAssets/dist/js/demo.js"></script>

    <script>
      $(".datepicker").datepicker({
        autoclose: true,
        //dateFormat: "MM dd, yy",
        pickTime: false,
        autoclose: true,
        changeMonth: true,
        changeYear: true,
        // startDate: new Date(),
        format: "dd-M-yyyy",
      });
    </script>

    <script>
      $(".StartDate").datepicker({
        autoclose: true,
        //dateFormat: "MM dd, yy",
        pickTime: false,
        autoclose: true,
        changeMonth: true,
        changeYear: true,
        //startDate: new Date(),
        format: "dd-M-yyyy",
      });
    </script>

    <script>
      $(".dateofadmission").datepicker({
        autoclose: true,
        //dateFormat: "MM dd, yy",
        pickTime: false,
        autoclose: true,
        changeMonth: true,
        changeYear: true,
        //format: "dd/mm/yyyy"
        format: "dd-M-yyyy",
      });
    </script>

    <script>
      $("#datepicker").on("change", function () {
        var selected = $(this).val();
        selected = selected.replace(/-/g, "/");
        var date = new Date(selected);
        let next30days = new Date(date.setDate(date.getDate() + 29));

        //var tagText = $(this).html();
        //tagText = tagText.replace(/-/g, '/');
        //var givenDate = new Date(tagText);

        //  console.log('its', next30days);

        //$(".datepicker2").datepicker('setDate', new Date(date));
        $(".datepicker2")
          .datepicker({
            format: "dd-M-yyyy",
          })
          .datepicker("setDate", new Date(next30days));
      });
    </script>

    <script>
      $("#StartDate").on("change", function () {
        var selected = $(this).val();
        selected = selected.replace(/-/g, "/");
        var date = new Date(selected);
        //date.setMonth(date.getMonth() + 1);
        let next30days = new Date(date.setDate(date.getDate() + 29));

        //$(".datepicker2").datepicker('setDate', new Date(date));
        $(".datepicker3")
          .datepicker({
            format: "dd-M-yyyy",
          })
          .datepicker("setDate", new Date(next30days));
      });
    </script>
    <script>
      $(".date").datepicker({
        onSelect: function (dateText) {
          console.log(
            "Selected date: " +
              dateText +
              "; input's current value: " +
              this.value
          );
        },
      });
    </script>

    <script>
      $(".datepickermmdd").datepicker({
        autoclose: true,
        dateFormat: "MM yy",
        changeMonth: true,
        changeYear: true,
      });
    </script>
    <script>
      $(function () {
        $(".example1").DataTable();

        $("#example1").DataTable({
          paging: false,
          bFilter: true,
          lengthChange: true,
          searching: false,
          ordering: true,
          info: true,
          autoWidth: true,
        });
      });
    </script>

    <script>
      $(function () {
        //Initialize Select2 Elements
        $(".select2").select2();

        //Datemask dd/mm/yyyy
        $("#datemask").inputmask("dd/mm/yyyy", { placeholder: "dd/mm/yyyy" });
        //Datemask2 mm/dd/yyyy
        $("#datemask2").inputmask("mm/dd/yyyy", { placeholder: "mm/dd/yyyy" });
        //Money Euro
        $("[data-mask]").inputmask();

        //Date range picker
        $("#reservation").daterangepicker();
        //Date range picker with time picker
        $("#reservationtime").daterangepicker({
          timePicker: true,
          timePickerIncrement: 30,
          format: "MM/DD/YYYY h:mm A",
        });
        //Date range as a button
        $("#daterange-btn").daterangepicker(
          {
            ranges: {
              Today: [moment(), moment()],
              Yesterday: [
                moment().subtract(1, "days"),
                moment().subtract(1, "days"),
              ],
              "Last 7 Days": [moment().subtract(6, "days"), moment()],
              "Last 30 Days": [moment().subtract(29, "days"), moment()],
              "This Month": [
                moment().startOf("month"),
                moment().endOf("month"),
              ],
              "Last Month": [
                moment().subtract(1, "month").startOf("month"),
                moment().subtract(1, "month").endOf("month"),
              ],
            },
            startDate: moment().subtract(29, "days"),
            endDate: moment(),
          },
          function (start, end) {
            $("#daterange-btn span").html(
              start.format("MMMM D, YYYY") + " - " + end.format("MMMM D, YYYY")
            );
          }
        );

        //Date picker

        //iCheck for checkbox and radio inputs
        $('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck(
          {
            checkboxClass: "icheckbox_minimal-blue",
            radioClass: "iradio_minimal-blue",
          }
        );
        //Red color scheme for iCheck
        $(
          'input[type="checkbox"].minimal-red, input[type="radio"].minimal-red'
        ).iCheck({
          checkboxClass: "icheckbox_minimal-red",
          radioClass: "iradio_minimal-red",
        });
        //Flat red color scheme for iCheck
        $(
          'input[type="checkbox"].flat-red, input[type="radio"].flat-red'
        ).iCheck({
          checkboxClass: "icheckbox_flat-green",
          radioClass: "iradio_flat-green",
        });

        //Colorpicker
        $(".my-colorpicker1").colorpicker();
        //color picker with addon
        $(".my-colorpicker2").colorpicker();

        //Timepicker
        $(".timepicker").timepicker({
          showInputs: false,
        });
      });
    </script>

    <script>
      /** add active class and stay opened when selected */
      var url = window.location;

      // for sidebar menu entirely but not cover treeview
      $("ul.sidebar-menu a")
        .filter(function () {
          return this.href == url;
        })
        .parent()
        .addClass("active");

      // for treeview
      $("ul.treeview-menu a")
        .filter(function () {
          return this.href == url;
        })
        .parentsUntil(".sidebar-menu > .treeview-menu")
        .addClass("active");
    </script>

    <script>
      $(document).ready(function () {
        var returnurl = window.location.href;
        var anchors = $("a");
        anchors.each(function (index) {
          if ($(this).attr("data-isReturn") == "true") {
            var href = $(this).attr("href");
            $(this).attr(
              "href",
              href + (href.match(/\?/) ? "&" : "?") + "returnurl=" + returnurl
            );
          }
        });

        $("#txtuppercase").keyup(function () {
          $(this).val($(this).val().toUpperCase());
        });

        $("#txtuppercase2").keyup(function () {
          $(this).val($(this).val().toUpperCase());
        });

        $("#txtuppercase3").keyup(function () {
          $(this).val($(this).val().toUpperCase());
        });

        $("#txtuppercase4").keyup(function () {
          $(this).val($(this).val().toUpperCase());
        });

        $("#txtuppercase5").keyup(function () {
          $(this).val($(this).val().toUpperCase());
        });

        $("#txtuppercase6").keyup(function () {
          $(this).val($(this).val().toUpperCase());
        });
      });
    </script>
    <script language="Javascript">
      function IsNumericCheck(e, value) {
        //Check Charater
        var unicode = e.charCode ? e.charCode : e.keyCode;
        if (value.indexOf(".") != -1) if (unicode == 46) return false;
        if (unicode != 8)
          if ((unicode < 48 || unicode > 57) && unicode != 46) return false;
      }
    </script>
    <script>
      document
        .getElementById("seatAllocationForm")
        .addEventListener("submit", submitForm);

      async function submitForm(event) {
        event.preventDefault(); // Prevent default form submission

        const form = document.getElementById("seatAllocationForm");
        const formData = new FormData(form);
        // const StatusCheckbox = document.getElementById("Status");
        // const StatusValue = StatusCheckbox.checked ? "true" : "false";

        // formData.set("Status", StatusValue);
        const allocationid = formData.get("Id");
        // console.log("id", allocationid);

        try {
          // if it is update call
          if (allocationid) {
            const response = await fetch(
              `http://localhost:5000/update-seat-allocation/${allocationid}`,
              {
                method: "PUT",
                body: formData,
              }
            );
            const result = await response.json();
            if (result.success) {
              alert("Seat allocation updated successfully");
              // redirect to expenses page
              window.location.href = "/Admin/SeatAllocation.html";
            } else {
              alert("Error updating seat allocation. Please try again.");
            }
          } else {
            const response = await fetch(
              "http://localhost:5000/add-seat-allocation",
              {
                method: "POST",
                body: formData,
              }
            );

            const result = await response.json();

            if (result.success) {
              alert("Seat allocated successfully");
              // redirect to the expenses page
              window.location.href = "/Admin/SeatAllocationReport.html";
            } else {
              alert("Error adding seat allocation. Please try again.");
            }
          }
        } catch (error) {
          console.log("Error:", error);
          alert("Internal Server Error. Please try again later.");
        }
      }

      // document.addEventListener("DOMContentLoaded", function () {
      //   // Parse query string parameters
      //   const params = new URLSearchParams(window.location.search);
      //   console.log(params);

      //   // Populate form fields with values from the query string
      //   document.getElementById("Name").value = params.get("student_name") || "";
      //   document.getElementById("FatherName").value =
      //     params.get("father_name") || "";
      //   document.getElementById("Address").value = params.get("address") || "";
      //   document.getElementById("Gender").value = params.get("gender") || "";
      //   document.getElementById("MobileNo").value = params.get("mobile_number") || "";
      //   document.getElementById("AadharCardNo").value = params.get("aadhar_number") || "";
      //   document.getElementById("ProfilePhoto").value = params.get("profile_photo") || "";
      //   document.getElementById("Id").value = params.get("id") || "";
      //
      // });
    </script>
  </body>
</html>
